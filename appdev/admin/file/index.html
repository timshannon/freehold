<!DOCTYPE html>
<html>
  <head>
    <title>freehold - Adminstrator Console</title>
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

		<link href="/core/v1/file/css/freehold.css" rel="stylesheet" media="screen">
		<link href="/admin/v1/file/css/index.css" rel="stylesheet" media="screen">
	</head>
<body>
<div id="navHook"></div>

<div class="container">
	<ul class="nav nav-tabs" role="tablist">
		<li class="active"><a href="#logs" role="tab" data-toggle="tab">Logs</a></li>
		<li><a href="#users" role="tab" data-toggle="tab">Users</a></li>
		<li><a href="#settings" role="tab" data-toggle="tab">Settings</a></li>
	</ul>

	<!--tab contents-->
	<div class="tab-content">
		<div class="tab-pane active" id="logs">
		</div>
		<div class="tab-pane" id="users">
		</div>
		<div class="tab-pane" id="settings">
		</div>
	</div>
	
</div><!--container-->

<!--templates-->
<script id="tLogs" type="text/ractive">
<div class="well form-inline form-group admin-control-group">
	<label id="filterLabel" class="control-label">Filter:</label>
	<label class="radio-inline"><input type="radio" name="typeFilter" on-click="filterAll" value="all" checked>All</label>
	<label class="radio-inline"><input type="radio" name="typeFilter" on-click="filterError" value="error">Errors</label>
	<label class="radio-inline"><input type="radio" name="typeFilter" on-click="filterFail" value="fail">Failures</label>
	<label class="radio-inline"><input type="radio" name="typeFilter" on-click="filterAuth" value="auth">Auth Errors</label>
	<div class="form-group">
		<input type="text" id="filterText" class="form-control" placeholder="filter message" value="{{filterText}}">
		{{#filterWaiting}}
		<div id="filterSpinner" class="spinner form-group"></div>
		{{/filterWaiting}}
	</div>
</div>

<table class="table table-condensed table-striped table-hover">
	<thead>
		<tr>
			<th>
				<a href="#" on-click="sortLog">When<span class="caret{{#iter.order == 'asc'}} caret-up{{/sortAsc}}"></span></a>
			</th>
			<th>Type</th>
			<th>Message</th>
		</tr>
	</thead>
	<tbody>
		{{#logs:i }}
		{{#i >= page.start && i < page.end}}
		<tr class="{{type=='error' ? 'danger' : ''}} {{type=='failure' ? 'warning' : ''}}">
			<td>{{when}}</td>
			<td>{{type}}</td>
			<td>{{log}}</td>
		</tr>
		{{/i}}
		{{/logs}}
	</tbody>
</table>
<div class="btn-group">
	<a href="#" class="btn btn-default{{#page.start === 0}} disabled{{/page}}" on-click="prev">
		<span class="glyphicon glyphicon-chevron-left"></span></a>
	<a href="#" class="btn btn-default{{#page.end > logs.length}} disabled{{/page}}" on-click="next">
		<span class="glyphicon glyphicon-chevron-right"></span></a>
</div>

</script>

<script id="tUsers" type="text/ractive">
<modal id="userModal" title="{{#if mode == "add"}}Add New User{{else}}Change User {{current.username}}{{/if}}" customFooter="true">
	<form class="form-horizontal" role="form">
	<div class="form-group">
    <label for="username" class="col-sm-3 control-label">Username</label>
		{{#if mode=="add"}}
		<div class="col-sm-9">
			<input type="text" class="form-control" id="username" placeholder="Enter a username" value="{{current.username}}">
		</div>
		{{else}}
		<div class="col-sm-9">
      <p class="form-control-static">{{current.username}}</p>
    </div>
		{{/if}}
  </div>

	{{#if mode=="add"}}
	<div class="form-group">
    <label for="password" class="col-sm-3 control-label">Password</label>
		<div class="col-sm-9">
			<input type="password" class="form-control" id="password" placeholder="Enter a password" value="{{current.password}}">
		</div>
  </div>
	{{/if}}

	<div class="form-group">
    <label for="name" class="col-sm-3 control-label">Name</label>
		<div class="col-sm-9">
			<input type="text" class="form-control" id="name" placeholder="Enter user's name" value="{{current.name}}">
		</div>
  </div>
	<div class="form-group">
		<label for="email" class="col-sm-3 control-label">User E-mail</label>
		<div class="col-sm-9">
			<input type="email" class="form-control" id="email" placeholder="Enter user's email" value="{{current.email}}">
		</div>
	</div>
	<div class="form-group">
		<label for="homeApp" class="col-sm-3 control-label">User Home App</label>
		<div class="col-sm-9">
			<select class="form-control" name="homeApp">
				{{#apps:i}}
				<option value="{{i}}">{{name}}</option>
				{{/apps}}
			</select>
		</div>
	</div>
	</form>

	<div class="modal-footer">
		<button type="button" class="btn btn-default" on-click="save">Save</button>
		<button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
	</div>
</modal>

<ul class="list-group">
	<li class="list-group-item disabled">
		<button class="btn btn-success" on-click="addUser" type="button">
		<span class="glyphicon glyphicon-plus"></span>Add New User</button>
	</li>
	{{#users:i}}
	<li class="list-group-item">
	<button type="button" on-click="changeUser" class="pull-right btn btn-default">
			<span class="glyphicon glyphicon-cog"></span></button>

		<dl>
			<dt>{{#if name}} {{name}} {{else}} {{i}} {{/if}}</dt>
			<dd>
				<strong>Username:</strong>{{i}}<br>
				<strong>Email:</strong>{{email}}
			</dd>
		</dl>
			</li>
	{{/users}}
</ul>
</script>

<script id="tSettings" type="text/ractive">
<div class="container">
<ul class="list-group">
	<li class="list-group-item row disabled">
		<p>Note: Settings take effect immediately.</p>
		<input type="text" class="form-control" placeholder="filter settings" value="{{settingsFilter}}">
	</li>
	{{#settings:i}}
	{{^filtered}}
	<li class="list-group-item row{{#change}} list-group-item-info{{/change}}">
		<div class="col-md-8">
		<dl>
			<dt>{{i}}</dt><dd>{{description}}</dd>
		</dl>
		</div>
		<div class="col-md-4">
		{{#error}}
		<span class="label label-danger">{{error}}</span>
		{{/error}}
		<div class="input-group">
			{{#type=="string"}}
			<input type="text" class="form-control" disabled="{{^change}}disabled{{/change}}" value="{{value}}">
			{{/type}}
			{{#type=="number"}}
			<input type="number" class="form-control" disabled="{{^change}}disabled{{/change}}" value="{{value}}">
			{{/type}}
			{{#type=="boolean"}}
			<button type="button" disabled="{{^change}}disabled{{/change}}"  on-click="changeBoolean"
				class="btn btn-default {{#value}}btn-primary active{{/value}}">
			{{#value}}
				True
			{{else}}
				False
			{{/value}}
			</button>
			{{/type}}

      <span class="input-group-btn">
        <button class="btn btn-default" on-click="changeMode" type="button">{{#change}}Save{{else}}Change{{/change}}</button>
        <button class="btn btn-default" on-click="setDefault" title="set default value" type="button">
					<span class="glyphicon glyphicon-repeat"></span>
				</button>
      </span>

    </div>
		</div>
	</li>
	{{/filtered}}
	{{/settings}}
</ul>
</div>
</script>

<!--end templates-->
<script src="/core/v1/file/js/jquery-2.1.1.min.js"></script>
<script src="/core/v1/file/js/bootstrap.min.js"></script>
<script src="/core/v1/file/js/ractive.min.js"></script>
<script src="/core/v1/file/js/fh.js"></script>
<script src="/core/v1/file/js/fhComponents.js"></script>
<script src="/admin/v1/file/js/index.js"></script>
</body>
</html>

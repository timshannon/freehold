<!DOCTYPE html>
<html>
  <head>
    <title>freehold - Explorer</title>
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
		<link href="/core/v1/file/css/freehold.css" rel="stylesheet" media="screen"> 
		<link href="/explorer/v1/file/css/index.css" rel="stylesheet" media="screen"> 
	</head>
<body>
<div id="nb"></div>
<div id="pageContainer">
</div>
	
<!--templates-->
<script id="tNav" type="text/ractive">
<navbar error="{{error}}" app="Explorer"></navbar>
</script>

<script id="tMain" type="text/ractive">
<modal id="properties" title="{{currentFile.name}}" >
</modal>

<modal id="newFolder" title="New Folder" customFooter="true">
	<form class="form-horizontal" role="form" on-submit="newFolderSave">
		<div class="form-group">
			<label for="folderName" class="col-sm-3 control-label">Folder</label>
			<div class="col-sm-9">
				<input type="text" class="form-control" id="folderName" placeholder="Enter a folder name" value="{{newFolderName}}">
			</div>
		</div>
	</form>
	<div class="modal-footer">
		<button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
		<button type="button" class="btn btn-primary" on-click="newFolderSave">Save</button>
	</div>
</modal>
<div class="row">
	<div id="sidebar" class="col-sm-3">
		<ul class="nav nav-tabs" role="tablist">
			<li class="active"><a href="#tree" role="tab" data-toggle="tab">Folders</a></li>
			<li><a href="#starred" role="tab" data-toggle="tab">
			<span class="glyphicon glyphicon-star"></span></a></li>
			<a href="#" on-click="newFolder" class="btn btn-sm btn-success pull-right">
				<span class="glyphicon glyphicon-plus"></span> New Folder</a>
		</ul>
		<div class="tab-content">
			<div class="tab-pane active" id="tree">
				<tree root="{{root}}" on-select="treeSelect" selectKeypath="{{selectKeypath}}">
				</tree>
			</div>
			<div class="tab-pane" id="starred">
				<div class="bookmarks">
				{{#starred:i}}
					<a class="bookmark" href="/explorer/?file={{i}}" title="{{i}}"><span class="glyphicon glyphicon-star"></span>  {{.}}</a>
				{{/starred}}
				</div>
			</div>
		</div>
	</div>
	<div id="fileList" class="col-sm-9">
		<ol class="breadcrumb">
			{{#breadcrumbs:i}}
				<li><a href="#" on-click="crumbSelect">{{file.name}}</a></li>
			{{/breadcrumbs}}
			{{#currentFolder}}
			<li class="active">{{name}}</li>
			<a href="#" on-click="star" title="Bookmark Folder">
				<span class="pull-right glyphicon glyphicon-star star {{#.starred}}starred{{/.starred}}"></span>
			</a>	
			{{/currentFolder}}
		</ol>
		{{#currentFolder.children:i}}
			{{>fileTile}}
		{{/currentFolder.children}}
	</div>	
</div>


<!-- {{>fileTile}} -->
<span>
{{#if .isFolder}}
	<a href="#" on-click="explorerSelect" class="file-tile">
		<img class="file-icon" src="{{explorerIcon}}">	
		<span class="filename" title="{{#if name.length > 16}}{{name}}{{/if}}">{{name}}</span>
	</a>
{{else}}
	<a href="{{url}}" class="file-tile">
		<img class="file-icon" src="{{explorerIcon}}">
		<span class="filename" title="{{#if name.length > 16}}{{name}}{{/if}}">{{name}}</span>
	</a>
{{/if}}
</span>
<!-- {{/fileTile}} -->

</script>
<!--end templates-->

<script src="/core/v1/file/js/jquery-2.1.1.min.js"></script>
<script src="/core/v1/file/js/bootstrap.min.js"></script>
<script src="/core/v1/file/js/ractive.min.js"></script>
<script src="/core/v1/file/js/fh.js"></script>
<script src="/core/v1/file/js/components.js"></script>
<script src="/explorer/v1/file/js/index.js"></script>
</body>
</html>
